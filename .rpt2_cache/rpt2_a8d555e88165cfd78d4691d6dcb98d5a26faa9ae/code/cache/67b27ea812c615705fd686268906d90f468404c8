{
  "code": "export default class Mole {\r\n    constructor(normalState, hitState, scoreImg, downY, hitCallBack) {\r\n        this.normalState = normalState;\r\n        this.hitState = hitState;\r\n        this.downY = downY;\r\n        this.upY = this.normalState.y;\r\n        this.scoreImg = scoreImg;\r\n        this.scoreY = this.scoreImg.y;\r\n        this.reset();\r\n        this.hitCallBackHd = hitCallBack;\r\n        this.normalState.on(Laya.Event.MOUSE_DOWN, this, this.hit);\r\n    }\r\n    reset() {\r\n        this.normalState.visible = false;\r\n        this.hitState.visible = false;\r\n        this.scoreImg.visible = false;\r\n        this.isActive = false;\r\n        this.isShow = false;\r\n        this.isHit = false;\r\n    }\r\n    show() {\r\n        if (this.isActive)\r\n            return;\r\n        this.isActive = true;\r\n        this.isShow = true;\r\n        this.type = Math.random() < 0.4 ? 1 : 2;\r\n        this.normalState.skin = 'ui/mouse_normal_' + this.type + '.png';\r\n        this.hitState.skin = 'ui/mouse_hit_' + this.type + '.png';\r\n        this.scoreImg.skin = 'ui/score_' + this.type + '.png';\r\n        this.normalState.y = this.downY;\r\n        this.normalState.visible = true;\r\n        Laya.Tween.to(this.normalState, { y: this.upY }, 500, Laya.Ease.backOut, Laya.Handler.create(this, this.showComplete));\r\n    }\r\n    showComplete() {\r\n        if (this.isShow && !this.isHit) {\r\n            Laya.timer.once(1000, this, this.hide);\r\n        }\r\n    }\r\n    hide() {\r\n        if (this.isShow && !this.isHit) {\r\n            this.isShow = false;\r\n            Laya.Tween.to(this.normalState, { y: this.downY }, 300, Laya.Ease.backIn, Laya.Handler.create(this, this.reset));\r\n        }\r\n    }\r\n    hit() {\r\n        if (this.isShow && !this.isHit) {\r\n            this.isHit = true;\r\n            this.isShow = false;\r\n            Laya.timer.clear(this, this.hide);\r\n            this.normalState.visible = false;\r\n            this.hitState.visible = true;\r\n            this.hitCallBackHd.runWith(this.type);\r\n            Laya.timer.once(500, this, this.reset);\r\n            this.showScore();\r\n        }\r\n    }\r\n    showScore() {\r\n        this.scoreY += -5;\r\n        this.scoreImg.scale(0, 0);\r\n        this.scoreImg.visible = true;\r\n        Laya.Tween.to(this.scoreImg, { y: this.scoreY, scaleX: 1, scaleY: 1 }, 200, Laya.Ease.backInOut);\r\n    }\r\n}\r\n",
  "references": []
}
