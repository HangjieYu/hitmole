{
  "code": "import Mole from \"./Mole\";\r\nimport Hammer from \"./Hammer\";\r\nimport GameOver from \"./GameOver\";\r\nimport { ui } from \"./../ui/GameUI\";\r\nexport default class GameView extends ui.GameUI {\r\n    constructor() {\r\n        super();\r\n        this.moleNum = 9;\r\n        this.moles = new Array();\r\n        let hitCallBackHd = Laya.Handler.create(this, this.setScore, null, false);\r\n        for (let i = 0; i < this.moleNum; i++) {\r\n            let box = this.getChildByName('item' + i);\r\n            let mole = new Mole(box.getChildByName('normal'), box.getChildByName('hit'), box.getChildByName('scoreImg'), 21, hitCallBackHd);\r\n            this.moles.push(mole);\r\n        }\r\n        this.hammer = new Hammer();\r\n        this.addChild(this.hammer);\r\n        this.hammer.visible = false;\r\n    }\r\n    onLoop() {\r\n        this.timeBar.value -= 1 / 20;\r\n        if (this.timeBar.value <= 0) {\r\n            this.gameOver();\r\n            return;\r\n        }\r\n        let index = Math.floor(Math.random() * this.moleNum);\r\n        this.moles[index].show();\r\n    }\r\n    gameStart() {\r\n        this.timeBar.value = 1;\r\n        this.score = 0;\r\n        this.updateScoreUI();\r\n        this.hammer.visible = true;\r\n        this.hammer.start();\r\n        Laya.timer.loop(1000, this, this.onLoop);\r\n    }\r\n    gameOver() {\r\n        Laya.timer.clear(this, this.onLoop);\r\n        this.hammer.visible = false;\r\n        this.hammer.end();\r\n        if (!this._gameOver) {\r\n            this._gameOver = new GameOver();\r\n        }\r\n        this._gameOver.centerX = 0;\r\n        this._gameOver.centerY = 40;\r\n        this._gameOver.setScoreUI(this.score);\r\n        Laya.stage.addChild(this._gameOver);\r\n        console.log('游戏结束');\r\n    }\r\n    setScore(type) {\r\n        this.score += type === 1 ? -100 : 100;\r\n        if (this.score < 0)\r\n            this.score = 0;\r\n        this.updateScoreUI();\r\n    }\r\n    updateScoreUI() {\r\n        let data = {};\r\n        let temp = this.score;\r\n        for (let i = 9; i >= 0; i--) {\r\n            data['item' + i] = { index: Math.floor(temp % 10) };\r\n            temp = temp / 10;\r\n        }\r\n        this.scoreNums.dataSource = data;\r\n    }\r\n}\r\n",
  "references": [
    "D:/myLaya/HitMole-master/HitMole-master/src/script/Mole.ts",
    "D:/myLaya/HitMole-master/HitMole-master/src/script/Hammer.ts",
    "D:/myLaya/HitMole-master/HitMole-master/src/script/GameOver.ts",
    "D:/myLaya/HitMole-master/HitMole-master/src/ui/GameUI.ts"
  ]
}
